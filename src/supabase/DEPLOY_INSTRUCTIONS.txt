================================================================================
EZ GRADES DATABASE DEPLOYMENT - SIMPLE 4-STEP GUIDE
================================================================================

STEP 1: DROP OLD TABLES (Clean Slate)
------------------------------------------------------
1. Open Supabase Dashboard ‚Üí SQL Editor
2. Copy entire content of: DROP_ALL_TABLES.sql
3. Paste and click "Run"
4. Wait for: "‚úÖ All tables and types dropped successfully"

STEP 2: CREATE NEW SCHEMA (Main Deployment)
------------------------------------------------------
1. In SQL Editor, copy entire content of: UNIFIED_SCHEMA.sql
2. Paste and click "Run"
3. Wait 10-15 seconds for completion
4. Look for: "‚úÖ EZ GRADES DATABASE SCHEMA DEPLOYED SUCCESSFULLY"
5. Should show: "üìä Total tables created: 44"

STEP 3: VERIFY DEPLOYMENT (Check Everything Works)
------------------------------------------------------
1. In SQL Editor, copy entire content of: VERIFY_TABLES.sql
2. Paste and click "Run"
3. You should see all tables marked with ‚úÖ
4. Look for: "üéâ SUCCESS! All tables are present!"
5. If any tables show ‚ùå, re-run UNIFIED_SCHEMA.sql

STEP 4: CREATE AUTO-PROFILE TRIGGER (CRITICAL!)
------------------------------------------------------
1. In SQL Editor, copy entire content of: AUTO_PROFILE_TRIGGER.sql
2. Paste and click "Run"
3. This creates:
   - Automatic profile creation when user signs up
   - Auto-creates preferences and stats
   - No manual profile creation needed!
4. Look for: "‚úÖ AUTO PROFILE TRIGGER CREATED"

STEP 5: ADD SAMPLE CONTENT (Recommended)
------------------------------------------------------
1. In SQL Editor, copy entire content of: seed_data.sql
2. Paste and click "Run"
3. This adds:
   - 12 music tracks
   - 14 ambient sounds
   - 24 inspirational quotes/tips
   - 10 courses
   - 6 certifications
   - 30+ achievements
4. Look for: "‚úÖ SEED DATA INSERTED SUCCESSFULLY"

DONE! TEST YOUR APP
------------------------------------------------------
1. Open EZ Grades app
2. Sign up or log in
3. Try these features:
   ‚úì Create a focus session
   ‚úì Add a task
   ‚úì Play music from Music Player
   ‚úì Browse Study Hub courses
   ‚úì Check achievements in settings
5. Everything should work perfectly!

================================================================================
TROUBLESHOOTING
================================================================================

Issue: "relation already exists" errors
Fix: Run DROP_ALL_TABLES.sql first, then UNIFIED_SCHEMA.sql

Issue: Still showing 39 tables after deployment
Fix: Check Supabase logs for errors. One table might have failed.

Issue: "Failed to fetch" errors in app
Fix: Make sure your backend server is running (edge function)

Issue: "No profiles table" error
Fix: Make sure UNIFIED_SCHEMA.sql completed without errors

================================================================================
TABLE COUNT BREAKDOWN (44 Tables Total)
================================================================================

Core User Tables (5):
  ‚Ä¢ profiles, user_preferences, tasks, note_categories, notes

Focus Sessions (13):
  ‚Ä¢ focus_sessions (parent table)
  ‚Ä¢ focus_sessions_2025_01 through focus_sessions_2025_12 (monthly partitions)

Stats & Calendar (5):
  ‚Ä¢ daily_stats, weekly_goals, journal_entries
  ‚Ä¢ custom_backgrounds, calendar_events

Media Content (5):
  ‚Ä¢ tracks, ambient_sounds, inspirations
  ‚Ä¢ user_sound_settings, playback_state

Study Hub / AI (8):
  ‚Ä¢ courses, certifications, exam_questions
  ‚Ä¢ flashcard_decks, flashcards, course_enrollments
  ‚Ä¢ practice_sessions, chat_history

Social Features (7):
  ‚Ä¢ achievements, user_achievements
  ‚Ä¢ study_rooms, room_participants, room_messages
  ‚Ä¢ canvas_sessions, user_stats

Backend Storage (1):
  ‚Ä¢ kv_store_7ba2faf7

Total: 44 tables ‚úÖ

================================================================================
FILES YOU NEED
================================================================================

‚úÖ DROP_ALL_TABLES.sql         - Step 1: Clean slate (drops everything)
‚úÖ UNIFIED_SCHEMA.sql           - Step 2: Creates all 44 tables
‚úÖ VERIFY_TABLES.sql            - Step 3: Confirms deployment success
üî• AUTO_PROFILE_TRIGGER.sql    - Step 4: Auto-creates profiles (CRITICAL!)
‚úÖ seed_data.sql                - Step 5: Adds sample content
üìñ DEPLOY_INSTRUCTIONS.txt      - This guide

================================================================================
DONE!
================================================================================

After following these steps, your database should be fully deployed with 40+ tables.
Your EZ Grades app should work perfectly!
